FROM onosproject/onos:2.2.0

RUN : \
    && rm -rf /etc/apt/sources.list.d/zulu.list \ 
    && apt-get update \
    && apt-get -y install curl vim tree git wget maven \
    && printf "\nexport ONOS_ROOT=\"/root/onos\"\nexport PATH=\$PATH:/root/onos/bin\n" >> /root/.bashrc \
    && cd /root/init-app \
    && mvn clean install -Dmaven.test.skip=true \
    && :

COPY ./ssh/ /root/.ssh/

# Copy ACL APP
COPY ./dynamicACL /dynamicACL

# Run ONOS
ENV ONOS_APPS="drivers,openflow,lldpprovider,proxyarp,gui2"
ENTRYPOINT ["./bin/onos-service"]
CMD ["server"]
